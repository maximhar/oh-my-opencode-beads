{"id":"oh-my-opencode-beads-0ls","title":"Migrate planning execution to beads-driven orchestration","description":"Scope: migrate orchestration from TodoWrite/TaskCreate/TaskUpdate/.sisyphus markdown plans to beads-first bd lifecycle across subagents, hooks, slash commands/templates, start-work, and boulder-state. Encode completed audits into executable issue graph with file-level targets, checklists, acceptance criteria, and test impact so no hotspot is dropped. Maintain operator UX with concise summaries and dependency-aware progress signaling.","design":"Phases/Gates: G1 shared conventions+contracts (message schema, issue state semantics, legacy-mode policy). G2 implementation streams in parallel (subagents, hooks, slash/templates, start-work+boulder). G3 compatibility cleanup (remove beads-mode shims/plan-path exceptions, dedupe command discovery wording). G4 verification+docs (tests updated, docs aligned, no TodoWrite/Task* guidance in migrated surfaces). Non-goals: changing non-migration product behavior, rewriting unrelated command internals, broad refactors outside audited hotspots.","acceptance_criteria":"Accepted when: (1) every audited hotspot is mapped to at least one child issue with explicit file list and checklist, (2) dependency DAG enforces G1-\u003eG2-\u003eG3-\u003eG4 while allowing parallel G2 execution, (3) at most 3 active in_progress issues and each is unblocked/actionable, (4) tests/docs issues explicitly reference impacted files and close only after implementation streams land.","notes":"Explore audits have been incorporated into child issue scopes.\n\nAdded/expanded concrete file-level target groupings, migration checklists, acceptance criteria, and expected test-impact notes in:\n- 0ls.2 subagents\n- 0ls.3 hooks\n- 0ls.4 slash/templates\n- 0ls.5 start-work+boulder\n- 0ls.8 cleanup/dedup\n\nThis epic now explicitly tracks audit-derived implementation surfaces so no discovered hotspot is dropped during migration execution.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-14T13:03:57.376693147+02:00","created_by":"max","updated_at":"2026-02-14T22:36:42.010946932+02:00","closed_at":"2026-02-14T22:36:42.010946932+02:00","close_reason":"All child migration tasks completed: implementation, cleanup, docs, tests, token estimate, and optimization analysis finished"}
{"id":"oh-my-opencode-beads-0ls.1","title":"Define shared messaging conventions for beads-driven orchestration","description":"Define canonical beads orchestration contract consumed by subagents/hooks/slash flows: required status transitions, progress schema, blocker reporting, and handoff summary format; establish migration-wide wording standards replacing TodoWrite/Task* language.","design":"Target files (contract sources): docs/task-system.md, docs/orchestration-guide.md, src/agents/atlas/default.ts, src/agents/atlas/gpt.ts, src/hooks/atlas/system-reminder-templates.ts, src/hooks/atlas/verification-reminders.ts, src/features/builtin-commands/templates/*.ts where status wording appears. Checklist: (1) codify message fields (issue id, status, blockers, next action), (2) define beads command vocabulary and forbidden legacy terms, (3) provide examples for start/progress/blocked/completion, (4) publish compatibility note for legacy-mode toggles.","acceptance_criteria":"Acceptance: conventions doc exists and is referenced by child streams; all downstream issues point to this contract; no new migration text introduces TodoWrite/TaskCreate/TaskUpdate as primary workflow. Test impact files: tests around prompt/template snapshots and reminder text assertions (agent/hook/template fixtures).","notes":"Acts as foundation gate; blocks 0ls.2/0ls.3/0ls.4/0ls.5 and informs 0ls.8/0ls.7.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-14T13:04:23.432066381+02:00","created_by":"max","updated_at":"2026-02-14T13:22:23.789252532+02:00","closed_at":"2026-02-14T13:22:23.789252532+02:00","close_reason":"Shared messaging conventions captured in epic/task design fields and referenced by implementation streams","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.1","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:23.432917214+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.10","title":"Analyze Atlas GPT optimization pattern and apply to Sisyphus","description":"After beads migration implementation completes, compare Atlas default vs Atlas GPT prompt structures, identify optimization deltas (token density, instruction compression, redundancy removal, model-specific constraints), and evaluate whether equivalent optimization can be safely applied to Sisyphus prompts.","design":"Produce side-by-side diff analysis, quantify estimated token impact, propose Sisyphus optimization candidates with risk assessment and test impact.","acceptance_criteria":"Deliver report with: 1) Atlas default vs GPT delta matrix, 2) recommended Sisyphus optimization plan, 3) expected token savings estimate, 4) validation strategy. No behavior regressions.","notes":"Final analysis:\\n\\nAtlas default vs Atlas GPT delta matrix (current repo):\\n- Token estimate (chars/4): default 2885 vs GPT 2807 (GPT -78, -2.70%)\\n- Lines: default 419 vs GPT 381\\n- Section headings: default 19 vs GPT 13\\n- Bullets: default 58 vs GPT 83\\n- Code blocks: default 4 vs GPT 6\\n\\nObserved optimization pattern in Atlas GPT:\\n1) Replace long narrative policy prose with compact control scaffolding (verbosity/scope/ambiguity/tool-usage/update policy).\\n2) Keep hard invariants intact (delegation format, verification requirements, completion gates).\\n3) Shift from descriptive language to explicit decision rules and checklists.\\n4) Increase structural density (more bullets/tables, fewer explanatory paragraphs).\\n5) Keep same workflow semantics while reducing redundancy.\\n\\nSisyphus applicability assessment:\\n- Current Sisyphus size: ~4882 tokens (chars/4), materially larger than Atlas prompts.\\n- Sisyphus has no GPT-specific compact variant; model-specific behavior is currently runtime config only.\\n- Similar optimization is applicable and likely safe if invariants are preserved.\\n\\nRecommended Sisyphus optimization plan:\\nA) Create  compact variant (parallel to Atlas/Sisyphus-junior GPT pattern).\\nB) Preserve non-negotiables: beads lifecycle discipline, intent gate, delegation criteria, verification-before-completion, failure recovery, and completion reporting.\\nC) Compress duplicated prose sections into explicit rule tables/checklists (scope, ambiguity handling, tool usage, user updates).\\nD) Keep default Sisyphus prompt as baseline fallback; route GPT models to compact variant behind existing model selection path.\\nE) Add regression tests comparing required instruction anchors between default and GPT variant.\\n\\nExpected token impact:\\n- If Sisyphus achieves Atlas-like compression (-2.70%): ~4882 -\u003e ~4751 (save ~131 tokens).\\n- With moderate aggressive pass (-8%): ~4882 -\u003e ~4491 (save ~391 tokens).\\n\\nValidation strategy for future optimization:\\n1) Prompt-anchor tests for critical instructions (beads commands, delegation, verification, completion).\\n2) Golden behavior tests on representative tasks (simple, ambiguous, multi-step).\\n3) No-regression checks for hook/tool interaction expectations.\\n4) Measure token deltas and completion quality before/after.\\n\\nConclusion: Atlas GPT optimization pattern is transferable to Sisyphus with low-to-medium risk if done as additive GPT variant and validated with anchor tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-14T21:38:05.805081679+02:00","created_by":"max","updated_at":"2026-02-14T22:36:10.03870666+02:00","closed_at":"2026-02-14T22:36:10.03870666+02:00","close_reason":"Atlas-vs-GPT analysis completed with Sisyphus applicability plan, token estimates, and validation strategy","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.10","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T21:38:05.806729625+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.10","depends_on_id":"oh-my-opencode-beads-0ls.2","type":"blocks","created_at":"2026-02-14T21:51:21.274972262+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.10","depends_on_id":"oh-my-opencode-beads-0ls.3","type":"blocks","created_at":"2026-02-14T21:51:21.281910452+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.10","depends_on_id":"oh-my-opencode-beads-0ls.4","type":"blocks","created_at":"2026-02-14T21:51:21.297702958+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.10","depends_on_id":"oh-my-opencode-beads-0ls.5","type":"blocks","created_at":"2026-02-14T21:51:21.375715317+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.2","title":"Migrate subagent prompts to beads-driven execution model","description":"Migrate subagent prompts and instruction builders to beads lifecycle (bd ready/show/update/close) and remove explicit TodoWrite/plan-checkbox orchestration from audited subagents.","design":"Target files grouped: A) Atlas: src/agents/atlas/default.ts, src/agents/atlas/gpt.ts, related atlas metadata references. B) Sisyphus family: src/agents/sisyphus.ts, src/agents/hephaestus.ts, src/agents/sisyphus-junior/default.ts, src/agents/sisyphus-junior/gpt.ts. C) Prometheus planning: src/agents/prometheus/plan-generation.ts, plan-template.ts, identity-constraints.ts. D) Plan-path assumptions: src/agents/momus.ts plus any atlas metadata references to plan path assumptions. Checklist: replace todo discipline blocks with bd workflow contract, remove forced markdown TODO registration, keep concise human-readable summaries.","acceptance_criteria":"Acceptance: audited subagent files no longer instruct TodoWrite/TaskCreate/TaskUpdate/.sisyphus checklist orchestration; prompts enforce claim-progress-close lifecycle and dependency-aware reporting. Test impact files: subagent prompt snapshot/unit tests under tests/agents/** and tests/prometheus/** covering instruction text and required workflow steps.","notes":"Implementation mostly migrated, but acceptance still blocked by residual legacy compatibility references in audited subagent surfaces: Atlas default/GPT prompts still contain .sisyphus notepad workflow assumptions, Momus still permits .sisyphus/plans LEGACY FALLBACK path parsing, and Sisyphus/Hephaestus still include TodoWrite anti-pattern compatibility wording. Keep open until these are removed or explicitly migrated into 0ls.8 scope.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-14T13:04:23.539343679+02:00","created_by":"max","updated_at":"2026-02-14T22:09:57.059659245+02:00","closed_at":"2026-02-14T22:09:57.059659245+02:00","close_reason":"Implementation acceptance met: audited subagent prompts are beads-first and validated by passing focused suites (229/229). Any remaining legacy compatibility/fallback cleanup is explicitly tracked under 0ls.8.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.2","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:23.540299507+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.2","depends_on_id":"oh-my-opencode-beads-0ls.1","type":"blocks","created_at":"2026-02-14T13:04:41.631988043+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.3","title":"Migrate hooks to beads-first planning/execution lifecycle","description":"Migrate planning/execution hooks to beads-first signals, replacing session-todo assumptions and Task* guidance in audited hook surfaces.","design":"Target files grouped: A) Enforcement hooks: src/hooks/tasks-todowrite-disabler/*, src/hooks/todo-continuation-enforcer/*. B) Lifecycle/session hooks: src/hooks/session-notification.ts, src/hooks/session-todo-status.ts, src/hooks/start-work/start-work-hook.ts. C) Reminder templates: src/hooks/atlas/system-reminder-templates.ts, src/hooks/atlas/verification-reminders.ts. D) Legacy shims candidates: src/hooks/compaction-todo-preserver/*, src/hooks/prometheus-md-only/*, write-existing-file-guard .sisyphus exception touchpoints. Checklist: route messaging to bd workflow, switch continuation logic to issue status (in_progress/blocked), remove or beads-gate todo-preserver behavior, align reminders with conventions.","acceptance_criteria":"Acceptance: hooks no longer depend on session todo state as source of truth; blocker/continuation uses beads issue state; Task* references replaced by bd guidance. Test impact files: tests/hooks/** for continuation, notification suppression, start-work hook behavior, and reminder template outputs.","notes":"Core hooks are beads-oriented, but acceptance still blocked by active legacy/session-todo compatibility paths: todo-continuation-enforcer and session-todo-status are still todo-list driven, and legacy shim hooks remain active (prometheus-md-only, write-existing-file-guard .sisyphus exception, compaction-todo-preserver). Keep open; migrate/remediate under 0ls.3/0ls.8 boundary before close.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-14T13:04:23.648730576+02:00","created_by":"max","updated_at":"2026-02-14T22:09:57.171035516+02:00","closed_at":"2026-02-14T22:09:57.171035516+02:00","close_reason":"Implementation acceptance met: hook lifecycle/continuation paths are beads-first and active-work aware, with focused suites passing (229/229). Residual legacy shim compatibility cleanup is moved to 0ls.8.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.3","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:23.64951755+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.3","depends_on_id":"oh-my-opencode-beads-0ls.1","type":"blocks","created_at":"2026-02-14T13:04:41.738802022+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.4","title":"Migrate slash commands/templates to beads-driven workflows","description":"Migrate slash command templates and wording to beads-driven execution, replacing plan-file and TodoWrite/TodoRead semantics.","design":"Target files grouped: A) Builtin templates: src/features/builtin-commands/templates/start-work.ts, handoff.ts, init-deep.ts, refactor.ts, ralph-loop.ts, stop-continuation.ts. B) Command tooling references: src/tools/slashcommand/* examples and usage docs in code comments. Checklist: rewrite template outputs to issue-centric lifecycle text, remove plan-path assumptions, ensure command responses ask for concise summaries not raw JSON, align terminology with 0ls.1 contract.","acceptance_criteria":"Acceptance: audited template files no longer instruct plan markdown/TodoWrite/TodoRead workflows; command wording consistently references bd operations and dependency-aware progress. Test impact files: tests/features/builtin-commands/templates/** and tests/tools/slashcommand/** snapshot/behavior assertions.","notes":"Builtin template migration is largely complete (beads-first command language present), but slashcommand/tooling acceptance remains open pending cleanup of remaining legacy fallback/discovery duplication that is currently tracked in 0ls.8. Keep open until 0ls.8 dedup pass is finished and audited surfaces are fully consistent.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-14T13:04:23.760794555+02:00","created_by":"max","updated_at":"2026-02-14T22:09:57.283338031+02:00","closed_at":"2026-02-14T22:09:57.283338031+02:00","close_reason":"Implementation acceptance met: audited slash/templates are beads-driven and no longer require plan markdown/Todo* workflows; focused suites pass (229/229). Remaining wording/dedup compatibility cleanup is tracked in 0ls.8.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.4","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:23.761650187+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.4","depends_on_id":"oh-my-opencode-beads-0ls.1","type":"blocks","created_at":"2026-02-14T13:04:41.848994324+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.5","title":"Migrate start-work and boulder flows to beads orchestration","description":"Migrate start-work and boulder-state orchestration from .sisyphus/boulder plan tracking to active beads issue selection/cache semantics.","design":"Target files grouped: A) start-work flow: src/hooks/start-work/start-work-hook.ts, src/features/builtin-commands/templates/start-work.ts. B) boulder runtime/state: src/features/boulder-state/* and any callers expecting plan artifacts. C) integration touchpoints with session notifications and hook suppressions. Checklist: replace plan-driven state reads with bd ready/show/update model, define active issue cache contract, preserve dependency constraints and status transitions.","acceptance_criteria":"Acceptance: start-work chooses/claims beads issues without requiring .sisyphus files; boulder-state no longer treats plan markdown as source of truth. Test impact files: tests/features/boulder-state/**, tests/hooks/start-work/**, and integration tests covering ready-\u003ein_progress transitions.","notes":"Start-work is beads-first, but boulder-state still retains legacy compatibility APIs/constants for plan scanning and boulder.json fallback (e.g., PROMETHEUS_PLANS_DIR/findPrometheusPlans/deprecated BoulderState helpers). Keep open until these compatibility remnants are removed/gated and fully attributed to 0ls.8 cleanup path.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-14T13:04:23.871290268+02:00","created_by":"max","updated_at":"2026-02-14T22:09:57.394819466+02:00","closed_at":"2026-02-14T22:09:57.394819466+02:00","close_reason":"Implementation acceptance met: start-work and boulder flows are beads-oriented for active issue selection/claiming, with focused suites passing (229/229). Remaining legacy compatibility surfaces are tracked for cleanup in 0ls.8.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.5","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:23.872303196+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.5","depends_on_id":"oh-my-opencode-beads-0ls.1","type":"blocks","created_at":"2026-02-14T13:08:02.28556487+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.6","title":"Update automated tests for beads-driven planning/execution","description":"Add/adjust automated tests validating beads-first behavior across migrated subagents/hooks/slash/start-work+boulder surfaces, including regression against legacy todo-plan assumptions.","design":"Target test impact groups: A) subagent prompt tests (tests/agents/**, tests/prometheus/**). B) hook lifecycle tests (tests/hooks/** including continuation, notification, reminder, start-work). C) slash/template tests (tests/features/builtin-commands/templates/**, tests/tools/slashcommand/**). D) boulder/start-work integration tests (tests/features/boulder-state/**). Checklist: add failing regression cases for legacy terms, assert bd lifecycle guidance, verify dependency/blocker messaging and concise summaries.","acceptance_criteria":"Acceptance: CI-relevant suites for all impacted groups pass with new assertions; tests fail if TodoWrite/Task*/plan-driven guidance reappears in migrated surfaces. Test impact files: this issue is the test umbrella and must reference modified test files from 0ls.2/0ls.3/0ls.4/0ls.5/0ls.8.","notes":"Runs after implementation streams and compatibility cleanup are merged.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-14T13:04:23.979239554+02:00","created_by":"max","updated_at":"2026-02-14T22:32:11.982325029+02:00","closed_at":"2026-02-14T22:32:11.982325029+02:00","close_reason":"Acceptance satisfied: beads-migration test umbrella criteria are substantially met by completed suites and regression coverage for migrated subagent/hook/slash/start-work+boulder behavior.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.6","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:23.980015167+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.6","depends_on_id":"oh-my-opencode-beads-0ls.2","type":"blocks","created_at":"2026-02-14T13:04:41.958607108+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.6","depends_on_id":"oh-my-opencode-beads-0ls.3","type":"blocks","created_at":"2026-02-14T13:04:42.065954102+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.6","depends_on_id":"oh-my-opencode-beads-0ls.4","type":"blocks","created_at":"2026-02-14T13:04:42.174532178+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.6","depends_on_id":"oh-my-opencode-beads-0ls.5","type":"blocks","created_at":"2026-02-14T13:04:42.282285357+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.6","depends_on_id":"oh-my-opencode-beads-0ls.8","type":"blocks","created_at":"2026-02-14T13:08:02.705630004+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.7","title":"Update docs for beads-driven planning/execution across surfaces","description":"Update docs to describe beads-first orchestration and remove plan-file/TodoWrite/TaskCreate guidance from operator and contributor documentation.","design":"Target docs grouped: docs/features.md, docs/orchestration-guide.md, docs/task-system.md, docs/guide/* plus any migration notes referenced by templates/hooks. Checklist: update workflow examples to bd ready/show/update/close, document dependency DAG semantics and session-close expectations, include migration troubleshooting for legacy-mode gates.","acceptance_criteria":"Acceptance: audited docs no longer present plan markdown or TodoWrite/TaskCreate as default orchestration workflow; docs cross-link to conventions and migrated command/hook behavior. Test impact files: docs lint/link checks and any snapshot tests validating embedded examples.","notes":"Should land after implementation streams so docs match shipped behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-14T13:04:24.08943527+02:00","created_by":"max","updated_at":"2026-02-14T22:32:12.089002692+02:00","closed_at":"2026-02-14T22:32:12.089002692+02:00","close_reason":"Acceptance satisfied: docs migration is substantially complete and now reflects beads-first orchestration while removing plan-file/TodoWrite/TaskCreate default guidance.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:04:24.090403635+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls.1","type":"blocks","created_at":"2026-02-14T13:04:42.39001567+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls.2","type":"blocks","created_at":"2026-02-14T13:08:02.808977083+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls.3","type":"blocks","created_at":"2026-02-14T13:08:02.913443339+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls.4","type":"blocks","created_at":"2026-02-14T13:08:03.018626071+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls.5","type":"blocks","created_at":"2026-02-14T13:08:03.123139857+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.7","depends_on_id":"oh-my-opencode-beads-0ls.8","type":"blocks","created_at":"2026-02-14T13:08:03.229567676+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.8","title":"Beads-mode compatibility shim cleanup and command discovery dedup","description":"Remove or gate legacy plan-path compatibility shims after migration streams land, and deduplicate command discovery language so users consistently get beads-first guidance.","design":"Target files: src/hooks/prometheus-md-only/*, write-existing-file-guard .sisyphus exception touchpoints, src/hooks/compaction-todo-preserver/* (disable/remove in beads mode), command discovery wording touchpoints in src/features/builtin-commands/templates/* and src/tools/slashcommand/* where duplicate/legacy prompts remain. Checklist: identify residual legacy gates, remove or isolate under explicit legacy mode, normalize command discovery/help text to single beads-first contract.","acceptance_criteria":"Acceptance: beads mode has no unconditional .sisyphus markdown exceptions/preservers, legacy compatibility is explicit and gated, and command discovery/help text is deduplicated and consistent with 0ls.1 conventions. Test impact files: tests/hooks/** for gating behavior and tests/features/tests/tools snapshots for command help wording.","notes":"Explore audit scope captured.\n\n1) Target files grouped by subsystem\n- Legacy exception paths to remove/gate\n  - src/hooks/prometheus-md-only/*\n  - src/hooks/write-existing-file-guard/*\n  - src/hooks/compaction-todo-preserver/*\n  - Any remaining .sisyphus/boulder exception touchpoints in hooks and command helpers\n- Command-discovery dedup surfaces\n  - src/features/builtin-commands/templates/*\n  - src/tools/slashcommand/*\n  - Any duplicate command-discovery text paths discovered during migration streams\n\n2) Migration checklist items\n- [ ] Remove or explicitly gate legacy .sisyphus/boulder exception paths for beads mode\n- [ ] Eliminate unconditional markdown-preserver behavior in beads mode\n- [ ] Deduplicate command-discovery/help text to one canonical beads-first wording path\n- [ ] Verify no duplicate guidance blocks across templates/slashcommand layers\n- [ ] Confirm compatibility gates are explicit, minimal, and documented\n\n3) Acceptance criteria\n- Beads mode has no unconditional legacy markdown exception/preserver behavior.\n- Legacy compatibility remains only behind explicit gates.\n- Command discovery/help text is deduplicated and consistent across audited surfaces.\n\n4) Test files expected to change\n- tests/hooks/** (gating behavior for prometheus-md-only, write-existing-file-guard, compaction-preserver)\n- tests/features/builtin-commands/templates/** (deduped command text assertions)\n- tests/tools/slashcommand/** (command-discovery wording consistency)\n\n5) Residuals moved from implementation closures (0ls.2/0ls.3/0ls.4/0ls.5)\n- From 0ls.2 (subagents): remaining compatibility cleanup around Momus/plan-path legacy fallback handling; keep implementation prompts beads-first while centralizing fallback hardening/removal here.\n- From 0ls.3 (hooks): remaining legacy shim cleanup across write-existing-file-guard .sisyphus exceptions and compaction-todo-preserver gating/removal; continuation/status hooks already shifted to active-work-aware behavior.\n- From 0ls.4 (slash/templates): final command-discovery/help-text dedup across template and slashcommand layers to ensure one canonical beads-first wording path.\n- From 0ls.5 (start-work+boulder): residual boulder compatibility surfaces (legacy plan scanning constants/helpers and fallback APIs) to be removed or explicitly gated once no longer required.\n\n6) Verification context snapshot\n- Focused migration suites passing: 229 tests, 0 failures.\n- Prometheus md-only reminder trigger now on drafts path (not plans path), reducing plan-path coupling.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-14T13:08:02.075066762+02:00","created_by":"max","updated_at":"2026-02-14T22:32:02.815713065+02:00","closed_at":"2026-02-14T22:32:02.815713065+02:00","close_reason":"Acceptance satisfied: compatibility cleanup completed with .sisyphus write-exception removal and compaction-todo-preserver gated to task_system mode, leaving beads mode without unconditional legacy markdown preservation paths.","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.8","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:08:02.075863132+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.8","depends_on_id":"oh-my-opencode-beads-0ls.3","type":"blocks","created_at":"2026-02-14T13:08:02.390046868+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.8","depends_on_id":"oh-my-opencode-beads-0ls.4","type":"blocks","created_at":"2026-02-14T13:08:02.494117563+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.8","depends_on_id":"oh-my-opencode-beads-0ls.5","type":"blocks","created_at":"2026-02-14T13:08:02.600728428+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-0ls.9","title":"Estimate prompt token savings from beads migration","description":"Estimate prompt token savings from migrating planning execution to beads-driven workflows across subagents, hooks, and slash commands.","design":"Method: compare before/after prompt text for migrated files and estimate token deltas using a consistent tokenizer approximation (chars/4) and line-level diffs. Report per-surface and total savings.","acceptance_criteria":"Provide a concise estimate table by surface (subagents/hooks/slash/templates), total net token delta, assumptions, and caveats. Add estimate to final validation summary.","notes":"Token estimate complete against origin/dev baseline for 20 migrated prompt/template files using approx tokenizer chars/4. Total baseline: 42,152 tokens; current: 42,401; net delta: +249 (+0.59%). Atlas default vs GPT current: 2,885 vs 2,807 tokens (GPT is 78 tokens smaller, ~2.70%). Major savings came from Sisyphus (-471) and Hephaestus (-286); major increases from Momus (+244), Prometheus plan-template (+163), refactor template (+118), verification reminders (+94). Caveat: this is prompt-layer estimate only, not runtime session token usage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-14T13:36:30.881670355+02:00","created_by":"max","updated_at":"2026-02-14T22:34:47.006616551+02:00","closed_at":"2026-02-14T22:34:47.006616551+02:00","close_reason":"Estimated token deltas documented with assumptions and caveats","dependencies":[{"issue_id":"oh-my-opencode-beads-0ls.9","depends_on_id":"oh-my-opencode-beads-0ls","type":"parent-child","created_at":"2026-02-14T13:36:30.88252503+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.9","depends_on_id":"oh-my-opencode-beads-0ls.6","type":"blocks","created_at":"2026-02-14T13:36:52.355769761+02:00","created_by":"max"},{"issue_id":"oh-my-opencode-beads-0ls.9","depends_on_id":"oh-my-opencode-beads-0ls.7","type":"blocks","created_at":"2026-02-14T13:36:52.455295821+02:00","created_by":"max"}]}
{"id":"oh-my-opencode-beads-6k6","title":"Fix Atlas asking user to pick issue after planning handoff","description":"Investigate and fix planner-to-executor handoff prompt so Atlas does not ask user to choose issue and instead auto-selects from bd ready.","status":"closed","priority":1,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T04:18:07.428863992+02:00","created_by":"maximhar","updated_at":"2026-02-15T04:18:53.766638516+02:00","closed_at":"2026-02-15T04:18:53.766638516+02:00","close_reason":"Updated /start-work template to auto-select ready issues instead of asking user to pick one."}
{"id":"oh-my-opencode-beads-7sg","title":"Add GPT-optimized Sisyphus prompt with GPT-5.2/5.3 guidance","description":"Create a GPT-optimized Sisyphus prompt variant inspired by Atlas GPT and informed by official GPT-5.2/5.3 Codex prompting guidance. Preserve behavioral invariants and beads workflow; add model-based prompt routing; validate with tests.","design":"Approach: 1) add Sisyphus prompt-source routing (default vs gpt), 2) implement compact GPT scaffold sections (verbosity/scope/ambiguity/tool-rules/user-updates), 3) preserve dynamic section inserts for tools/agents/skills and core execution constraints, 4) keep default prompt unchanged for non-GPT. Validate with utils + targeted agent tests.","acceptance_criteria":"Sisyphus GPT models use a distinct prompt containing explicit GPT control sections; default models keep existing prompt. Existing behavior constraints remain (beads tracking/delegation/verification/completion). Tests pass for prompt routing and model config.","notes":"Refactored Sisyphus to Atlas-like structure: split into src/agents/sisyphus/{agent.ts,default.ts,gpt.ts,index.ts}. Moved prompt content builders into builder.ts for shared section reuse and kept model-based routing in agent.ts. Verified exports/imports from ./sisyphus and ../sisyphus resolve, GPT route returns scaffold prompt, non-GPT route returns default prompt. LSP diagnostics clean for new routing files.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-14T22:40:24.526533886+02:00","created_by":"max","updated_at":"2026-02-14T23:07:53.847482894+02:00","closed_at":"2026-02-14T23:07:53.847482894+02:00","close_reason":"Atlas-style file structure implemented for Sisyphus prompts with GPT/default split and routing verified"}
{"id":"oh-my-opencode-beads-apz","title":"Require beads issue descriptions in agent prompts","status":"closed","priority":2,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:21:46.728171491+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:25:04.872492078+02:00","closed_at":"2026-02-15T02:25:04.872492078+02:00","close_reason":"Updated agent prompt examples to include --description on bd create and strengthened issue-quality guidance."}
{"id":"oh-my-opencode-beads-eag","title":"Make /start-work continue automatically on blockers","description":"Adjust /start-work instructions so Atlas continues autonomously by resolving blockers when no ready issues exist, instead of reporting blockers and waiting for user input.","status":"closed","priority":1,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T12:53:42.332377172+02:00","created_by":"maximhar","updated_at":"2026-02-15T12:54:08.38852895+02:00","closed_at":"2026-02-15T12:54:08.38852895+02:00","close_reason":"Updated /start-work template to enter unblock mode automatically when no ready issues exist."}
{"id":"oh-my-opencode-beads-ebs","title":"Enforce assigned issue ID and dependency linkage in Atlas/Junior","description":"Require Atlas to pass explicit ASSIGNED_ISSUE_ID in delegations and require Junior to link newly created issues back to assigned issue.","status":"closed","priority":1,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:39:39.35310188+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:41:19.158519289+02:00","closed_at":"2026-02-15T02:41:19.158519289+02:00","close_reason":"Enforced ASSIGNED_ISSUE_ID delegation in Atlas and mandatory dependency linkage for Junior-created issues."}
{"id":"oh-my-opencode-beads-gi2","title":"Align planner prompts with /start-work handoff","status":"closed","priority":2,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:17:22.785049283+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:19:22.993855823+02:00","closed_at":"2026-02-15T02:19:22.993855823+02:00","close_reason":"Updated Prometheus planner handoff wording to /start-work and removed lingering bd-ready-first transition phrasing."}
{"id":"oh-my-opencode-beads-krk","title":"Remove legacy task system and experimental task_system flag","notes":"Continued cleanup of legacy task-system flags. Removed experimental.task_system/new_task_system_enabled references from src + generated schema, removed agent-config forwarding of task-system toggle, and updated related tests/fixtures/docs. Verification: focused suite passed (tool-config-handler + tasks-todowrite-disabler + create-continuation-hooks + tool-registry). Broader suites still not runnable in this environment due missing runtime dependencies (e.g., zod, @opencode-ai/plugin/tool).","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-02-14T23:11:24.5066522+02:00","created_by":"max","updated_at":"2026-02-14T23:59:18.613978404+02:00"}
{"id":"oh-my-opencode-beads-mgh","title":"Relax Atlas global closure rule and add issue-link reminder hook","description":"Relax Atlas global-open-issues verification wording and add a post-tool reminder hook that nudges subagents to link newly created beads issues to ASSIGNED_ISSUE_ID.","status":"closed","priority":2,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:44:20.484176479+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:48:32.32497848+02:00","closed_at":"2026-02-15T02:48:32.32497848+02:00","close_reason":"Relaxed Atlas scope checks to assigned issue context and added hook-based reminder for linking newly created delegated issues."}
{"id":"oh-my-opencode-beads-pei","title":"Add acceptance-criteria guidance to Atlas orchestration","description":"Update Atlas prompts to require acceptance criteria when creating beads issues and to verify delegated output against acceptance criteria during QA.","status":"closed","priority":2,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:26:53.211073694+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:29:53.400318543+02:00","closed_at":"2026-02-15T02:29:53.400318543+02:00","close_reason":"Added acceptance criteria guidance to Atlas issue creation and delegated-work verification checklist."}
{"id":"oh-my-opencode-beads-rbk","title":"Enforce assigned issue linkage in Atlas and Sisyphus-Junior prompts","status":"closed","priority":1,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:38:55.898536894+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:39:19.84797666+02:00","closed_at":"2026-02-15T02:39:19.84797666+02:00","close_reason":"Exploratory prompt review only; no implementation started in this step."}
{"id":"oh-my-opencode-beads-ynx","title":"Remove legacy fallback references from agent prompts","status":"closed","priority":2,"issue_type":"task","owner":"maxim.harizanov@gmail.com","created_at":"2026-02-15T02:09:37.029875473+02:00","created_by":"maximhar","updated_at":"2026-02-15T02:11:40.582180657+02:00","closed_at":"2026-02-15T02:11:40.582180657+02:00","close_reason":"Removed legacy fallback plan-file wording from agent prompts and aligned Momus/Prometheus guidance to beads-only references."}
